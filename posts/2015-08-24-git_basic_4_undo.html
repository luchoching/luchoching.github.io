<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width"><title>Cho-Ching's Blog - git_basic_4_undo</title><link rel="stylesheet" href="../css/main.css"><link rel="stylesheet" href="../css/codepen-embed.css"><script src="../js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="Wrapper"><div class="Header"><h1><a href="/">Cho-Ching's Blog</a></h1><ul class="Menu"><li><a href="/">Posts</a></li><li><a href="/pages/Bookmarks.html">Bookmarks</a></li><li><a href="/english">English</a></li><li><a href="/pages/About.html">About</a></li></ul></div><div class="Main"><h1 id="-git-basics-undoing-things">[Git] basics --  Undoing things</h1>
<p>以下部份翻譯ProGit <a href="https://git-scm.com/book/zh-tw/v1/%E9%96%8B%E5%A7%8B">中文版v1</a> / <a href="https://git-scm.com/book/en/v2">英文版v2</a>, 加上自己一些測試。</p>
<hr>
<h2 id="undo-commiting">Undo Commiting</h2>
<p><code>git commit --amend</code> </p>
<p><code>git commit --amend file1, file2...</code></p>
<p>用來re-commit上次的commit。如果沒有staged的檔案存在, 那<code>git commit --amend</code>就是用來修改上次的commit訊息, 如果有staged的檔案存在, <code>git commit --amend</code>就會在這次修改的commit中, 加入這次的staged檔案。</p>
<pre><code>$ git <span class="hljs-operator"><span class="hljs-keyword">commit</span> -m <span class="hljs-string">'init commit'</span>
$ git <span class="hljs-keyword">add</span> forgetten_file
$ git <span class="hljs-keyword">commit</span> <span class="hljs-comment">--amend</span></span>
</code></pre><h2 id="unstaging-a-staged-file">Unstaging a Staged File</h2>
<p><code>git reset</code>: Reset the index but does not modify the working tree.</p>
<p><code>git reset HEAD &lt;filename&gt;</code></p>
<h2 id="unmodifying-reverting-a-modified-file">Unmodifying( reverting) a Modified File</h2>
<p><code>git checkout -- &lt;filename&gt;</code></p>
<p>這是一個危險的指令, 所有在這檔案做的改動都會不見, 就好像我們重新拷貝新的檔案覆蓋上去一樣, 除非真的不要這個檔案了, 不然不建議這麼做。</p>
<p>假如想要保留這些改變, 但是想將這些改變在現在排除, 建議使用 <strong>stashing</strong>(備份) 以及 <strong>branching</strong>(分支)</p>
<p>在Git中任何已經committed的內容幾乎都可以復元。即時是在分支中被刪除的commits或是用<code>--amend</code>修改的commit都可以復元。但是沒有被commit的資料就幾乎無法救回了</p>
<div id="disqus_thread"></div><h3 class="back"><a href="/"><< 回到文章列表</a></h3></div><script type="text/javascript">/* * * CONFIGURATION VARIABLES * * */
var disqus_shortname = 'luchoching';
/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><noscript><Please>enable JavaScript to view the </Please><a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus`</a></noscript><div class="Footer"><p><i>學習程式,順便翻譯與筆記。</i><a href="email:choching.work@gmail.com">Email Me >></a></p></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63125623-1', 'auto');
ga('send', 'pageview');</script></div></body></html>